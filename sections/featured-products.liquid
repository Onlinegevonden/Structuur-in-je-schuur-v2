<style>
  .products {
    background-color: rgba(245, 245, 244, 0.3);
    padding: 5rem 0;
  }
  
  @media (min-width: 1024px) {
    .products {
      padding: 7rem 0;
    }
  }
  
  .products__header {
    text-align: center;
    margin-bottom: 3rem;
  }
  
  .products__badge {
    display: inline-block;
    margin-bottom: 1rem;
    padding: 0.375rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: 9999px;
    background-color: var(--brand-muted);
    color: var(--brand-foreground);
  }
  
  .products__title {
    margin-bottom: 1rem;
    font-size: 1.875rem;
    font-weight: 700;
  }
  
  @media (min-width: 768px) {
    .products__title {
      font-size: 2.25rem;
    }
  }
  
  .products__subtitle {
    max-width: 42rem;
    margin: 0 auto;
    font-size: 1.125rem;
    color: var(--muted-foreground);
  }
  
  .products__grid {
    display: grid;
    gap: 2rem;
    max-width: 32rem;
    margin: 0 auto;
  }
  
  @media (min-width: 1024px) {
    .products__grid {
      grid-template-columns: repeat(3, 1fr);
      max-width: none;
    }
  }
  
  /* Product Card */
  .product-card {
    position: relative;
    overflow: hidden;
    background-color: var(--card);
    border: 1px solid var(--border);
    border-radius: var(--radius-xl);
    transition: all 0.3s ease;
  }
  
  .product-card:hover {
    border-color: rgba(255, 204, 0, 0.5);
    box-shadow: var(--shadow-xl);
  }
  
  .product-card__image-wrapper {
    position: relative;
    aspect-ratio: 1;
    overflow: hidden;
    background-color: rgba(245, 245, 244, 0.5);
    padding: 2rem;
  }
  
  .product-card__image {
    width: 100%;
    height: 100%;
    object-fit: contain;
    transition: transform 0.5s ease;
  }
  
  .product-card:hover .product-card__image {
    transform: scale(1.05);
  }
  
  .product-card__price-badge {
    position: absolute;
    top: 1rem;
    right: 1rem;
    padding: 0.375rem 0.75rem;
    font-family: 'Sora', sans-serif;
    font-size: 1.125rem;
    font-weight: 700;
    color: var(--brand-foreground);
    background-color: var(--brand);
    border-radius: var(--radius);
  }
  
  .product-card__content {
    padding: 1.5rem;
  }
  
  .product-card__title {
    margin-bottom: 0.5rem;
    font-family: 'Sora', sans-serif;
    font-size: 1.25rem;
    font-weight: 600;
    color: var(--foreground);
  }
  
  .product-card__description {
    margin-bottom: 1rem;
    color: var(--muted-foreground);
    line-height: 1.6;
  }
  
  .product-card__features {
    list-style: none;
    margin-bottom: 1.5rem;
  }
  
  .product-card__feature {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    font-size: 0.875rem;
    color: var(--muted-foreground);
  }
  
  .product-card__feature-dot {
    width: 6px;
    height: 6px;
    background-color: var(--brand);
    border-radius: 9999px;
    flex-shrink: 0;
  }
  
  .product-card__btn {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    width: 100%;
    padding: 0.75rem 1.5rem;
    font-weight: 500;
    color: var(--brand-foreground);
    background-color: var(--brand);
    border-radius: var(--radius);
    transition: all 0.2s ease;
  }
  
  .product-card__btn:hover {
    background-color: var(--brand-hover);
    transform: translateY(-1px);
  }
  
  .product-card__btn-icon {
    width: 16px;
    height: 16px;
  }
  
  /* Coming soon card */
  .coming-soon-card {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 2rem;
    background-color: rgba(255, 255, 255, 0.5);
    border: 2px dashed var(--border);
    border-radius: var(--radius-xl);
  }
  
  .coming-soon-card__content {
    text-align: center;
  }
  
  .coming-soon-card__icon {
    width: 3rem;
    height: 3rem;
    margin: 0 auto 1rem;
    color: var(--muted-foreground);
    opacity: 0.5;
  }
  
  .coming-soon-card__title {
    margin-bottom: 0.5rem;
    font-family: 'Sora', sans-serif;
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--muted-foreground);
  }
  
  .coming-soon-card__label {
    font-size: 0.875rem;
    color: var(--muted-foreground);
    opacity: 0.7;
  }
</style>

<section class="products" id="producten">
  <div class="container">
    <!-- Header -->
    <div class="products__header animate-on-scroll" style="opacity: 0; animation: fadeInUp 0.5s ease-out forwards;">
      {% if section.settings.badge_text != blank %}
        <span class="products__badge">{{ section.settings.badge_text }}</span>
      {% endif %}
      <h2 class="products__title font-sora">{{ section.settings.title | default: 'Onze populairste bouwplannen' }}</h2>
      <p class="products__subtitle">{{ section.settings.subtitle | default: 'Elk bouwplan is uitgebreid getest en bevat alles wat je nodig hebt om direct aan de slag te gaan.' }}</p>
    </div>
    
    <!-- Products grid -->
    <div class="products__grid">
      {% if section.settings.collection != blank %}
        {% for product in section.settings.collection.products limit: 3 %}
          <div class="product-card animate-on-scroll" style="opacity: 0; animation: fadeInUp 0.5s ease-out {{ forloop.index | times: 0.1 }}s forwards;">
            <div class="product-card__image-wrapper">
              {% if product.featured_image %}
                {{ product.featured_image | image_url: width: 600 | image_tag: class: 'product-card__image', alt: product.title }}
              {% else %}
                <img class="product-card__image" src="{{ 'product-placeholder.svg' | asset_url }}" alt="{{ product.title }}">
              {% endif %}
              <span class="product-card__price-badge">{{ product.price | money }}</span>
            </div>
            
            <div class="product-card__content">
              <h3 class="product-card__title">{{ product.title }}</h3>
              <p class="product-card__description">{{ product.description | strip_html | truncate: 120 }}</p>
              
              {% if product.metafields.custom.features != blank %}
                <ul class="product-card__features">
                  {% assign features = product.metafields.custom.features | split: '|' %}
                  {% for feature in features limit: 4 %}
                    <li class="product-card__feature">
                      <span class="product-card__feature-dot"></span>
                      <span>{{ feature | strip }}</span>
                    </li>
                  {% endfor %}
                </ul>
              {% endif %}
              
              <a href="{{ product.url }}" class="product-card__btn">
                <svg class="product-card__btn-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
                </svg>
                Bekijk bouwplan
              </a>
            </div>
          </div>
        {% endfor %}
      {% else %}
        <!-- Fallback product card when no collection is selected -->
        <div class="product-card animate-on-scroll" style="opacity: 0; animation: fadeInUp 0.5s ease-out forwards;">
          <div class="product-card__image-wrapper">
            {% if section.settings.fallback_image != blank %}
              {{ section.settings.fallback_image | image_url: width: 600 | image_tag: class: 'product-card__image', alt: 'Krattenkast Bouwplan' }}
            {% else %}
              <div style="width: 100%; height: 100%; display: flex; align-items: center; justify-content: center; background: linear-gradient(135deg, #FFF9E6 0%, #FFFFFF 100%);">
                <svg width="120" height="120" viewBox="0 0 24 24" fill="none" stroke="#FFCC00" stroke-width="1.5">
                  <path d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"/>
                </svg>
              </div>
            {% endif %}
            <span class="product-card__price-badge">â‚¬19</span>
          </div>
          
          <div class="product-card__content">
            <h3 class="product-card__title">Krattenkast Bouwplan</h3>
            <p class="product-card__description">Stevig houten rek voor IKEA Samla 45L boxen. Perfect voor gereedschap, seizoensspullen en meer.</p>
            
            <ul class="product-card__features">
              <li class="product-card__feature">
                <span class="product-card__feature-dot"></span>
                <span>Complete zaaglijst & materiaallijst</span>
              </li>
              <li class="product-card__feature">
                <span class="product-card__feature-dot"></span>
                <span>Stap-voor-stap instructies met foto's</span>
              </li>
              <li class="product-card__feature">
                <span class="product-card__feature-dot"></span>
                <span>Meerdere configuraties (2x2 tot 4x4)</span>
              </li>
              <li class="product-card__feature">
                <span class="product-card__feature-dot"></span>
                <span>Past bij Gamma, Praxis & Hornbach hout</span>
              </li>
            </ul>
            
            <a href="{{ section.settings.fallback_product_link | default: '/collections/all' }}" class="product-card__btn">
              <svg class="product-card__btn-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" />
              </svg>
              Bekijk bouwplan
            </a>
          </div>
        </div>
      {% endif %}
      
      <!-- Coming soon cards -->
      {% for block in section.blocks %}
        {% if block.type == 'coming_soon' %}
          <div class="coming-soon-card animate-on-scroll" style="opacity: 0; animation: fadeInUp 0.5s ease-out {{ forloop.index | plus: 1 | times: 0.1 }}s forwards;" {{ block.shopify_attributes }}>
            <div class="coming-soon-card__content">
              {% case block.settings.icon %}
                {% when 'file' %}
                  <svg class="coming-soon-card__icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
                  </svg>
                {% when 'ruler' %}
                  <svg class="coming-soon-card__icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                  </svg>
              {% endcase %}
              <h3 class="coming-soon-card__title">{{ block.settings.title }}</h3>
              <p class="coming-soon-card__label">{{ block.settings.label | default: 'Binnenkort beschikbaar' }}</p>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Producten grid",
  "settings": [
    {
      "type": "text",
      "id": "badge_text",
      "label": "Badge tekst",
      "default": "Bouwplannen"
    },
    {
      "type": "text",
      "id": "title",
      "label": "Titel",
      "default": "Onze populairste bouwplannen"
    },
    {
      "type": "textarea",
      "id": "subtitle",
      "label": "Ondertitel",
      "default": "Elk bouwplan is uitgebreid getest en bevat alles wat je nodig hebt om direct aan de slag te gaan."
    },
    {
      "type": "collection",
      "id": "collection",
      "label": "Collectie"
    },
    {
      "type": "header",
      "content": "Fallback product (als geen collectie)"
    },
    {
      "type": "image_picker",
      "id": "fallback_image",
      "label": "Product afbeelding"
    },
    {
      "type": "url",
      "id": "fallback_product_link",
      "label": "Product link"
    }
  ],
  "blocks": [
    {
      "type": "coming_soon",
      "name": "Binnenkort",
      "settings": [
        {
          "type": "select",
          "id": "icon",
          "label": "Icoon",
          "options": [
            { "value": "file", "label": "Document" },
            { "value": "ruler", "label": "Meetlat" }
          ],
          "default": "file"
        },
        {
          "type": "text",
          "id": "title",
          "label": "Titel",
          "default": "Nieuw product"
        },
        {
          "type": "text",
          "id": "label",
          "label": "Label",
          "default": "Binnenkort beschikbaar"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Producten grid",
      "blocks": [
        {
          "type": "coming_soon",
          "settings": {
            "icon": "file",
            "title": "Gereedschapswand",
            "label": "Binnenkort beschikbaar"
          }
        },
        {
          "type": "coming_soon",
          "settings": {
            "icon": "ruler",
            "title": "Werkbank",
            "label": "Binnenkort beschikbaar"
          }
        }
      ]
    }
  ]
}
{% endschema %}
